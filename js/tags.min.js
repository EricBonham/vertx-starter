riot.tag2("main",'<div if="{tool}" class="container"><h1>{tool.id}: {tool.file}</h1><form onsubmit="{generate}"><div each="{f, i in tool.fields}" class="row"><virtual if="{i % 2 == 0}"><div class="col-6"><input name="{tool.fields[i].key}" type="text" placeholder="{tool.fields[i].label + (tool.fields[i].prefill ? \' e.g.: \' + tool.fields[i].prefill : \'\')}" required="{tool.fields[i].required}"></div><div if="{tool.fields[i+1]}" class="col-6"><input name="{tool.fields[i+1].key}" type="text" placeholder="{tool.fields[i+1].label + (tool.fields[i+1].prefill ? \' e.g.: \' + tool.fields[i+1].prefill : \'\')}" required="{tool.fields[i+1].required}"></div><div if="{!tool.fields[i+1]}" class="col-6"></div></virtual></div><div if="{tool.languages || (presets && presets.length)}" class="row"><div if="{tool.languages}" class="col-6"><select id="language" onchange="{changeLanguage}"><option each="{tool.languages}" riot-value="{id}">{id}</option></select></div><div class="col-6"><select id="preset" disabled="{presets.length == 0}" onchange="{changePreset}"><option value="">Empty Project</option><option each="{presets}" riot-value="{id}">{id}</option></select></div></div><div class="row"><div class="col-6"><h1>Dependencies</h1></div><div class="col-6"><input type="text" class="pull-right" placeholder="Search dependency..." onkeyup="{search}"></div></div><div each="{c, i in idx}" class="row"><virtual if="{i % 2 == 0}"><div class="col-6 {components[idx[i]].checked?\'dependency\':\'\'}"><input name="dependencies" type="checkbox" riot-value="{idx[i]}" checked="{components[idx[i]].checked}" onclick="{toggleDependency}"><div><span if="{components[idx[i]].stack}" class="pull-right"><img src="img/stack.svg" width="16px"></span><strong>{components[idx[i]].artifactId}</strong><hr><p if="{components[idx[i]].description}">{components[idx[i]].description}</p></div><br></div><div if="{components[idx[i+1]]}" class="col-6 {components[idx[i+1]].checked?\'dependency\':\'\'}"><input name="dependencies" type="checkbox" riot-value="{idx[i+1]}" checked="{components[idx[i+1]].checked}" onclick="{toggleDependency}"><div><span if="{components[idx[i+1]].stack}" class="pull-right"><img src="img/stack.svg" width="16px"></span><strong>{components[idx[i+1]].artifactId}</strong><hr><p if="{components[idx[i+1]].description}">{components[idx[i+1]].description}</p></div><br></div><div if="{!components[idx[i+1]]}" class="col-6"></div></virtual></div><div class="row" id="interaction"><div class="col-8"><button name="submit" type="submit">Generate</button> &nbsp; <a id="download-btn" onclick="{clean}" href="#" show="{downloading}" ref="download" download="{name}.zip" style="padding: 1.1rem 3.5rem; margin: 1rem 0; background: #782b90; color: #f5f5f5; border-radius: 2px; border: none; font-size: 1.3rem; transition: all .2s ease">Download</a></div><div class="col-4"><div if="{generating}" class="spinner"><div class="rect1"></div><div class="rect2"></div><div class="rect3"></div><div class="rect4"></div><div class="rect5"></div></div></div></div></form><div class="row"><div class="center"><span>powered with <span style="color:#f00000">&lt;3</span> by <a href="https://github.com/pmlopes/vertx-starter/tree/gh-pages">github.com</a></span></div></div></div>',"","",function(e){function i(e){var i=route.query(),n={dependencies:(decodeURIComponent(i.dependencies)||"").split(",")};d.downloading=!1,e.languages?(d.idx.length=0,d.components.forEach(function(i,t){i.checked=!1,-1!==n.dependencies.indexOf(i.groupId+":"+i.artifactId+(i.classifier?":"+i.classifier:""))&&(i.checked=!0),-1!==n.dependencies.indexOf(i.groupId+":"+i.artifactId)&&(i.checked=!0),-1!==e.defaults.indexOf(i.groupId+":"+i.artifactId+(i.classifier?":"+i.classifier:""))&&(i.checked=!0),-1!==e.defaults.indexOf(i.groupId+":"+i.artifactId)&&(i.checked=!0),i.checked&&d.idx.push(t)}),d.update({tool:e,presets:t(e.id,e.languages[0].id),language:e.languages[0],idx:d.idx})):d.update({tool:e,idx:d.idx})}function t(i,t){return e.presets.filter(function(e){return e.language?e.buildtool?e.buildtool===i&&e.language===t:e.language===t:!!e.buildtool&&e.buildtool===i})}function n(e){var i=0;if(e.offsetParent){do{i+=e.offsetTop}while(e=e.offsetParent);return[i]}}var d=this;d.components=e.components,d.idx=[];var o=route.create();d.opts.buildtools.forEach(function(e){o(e.id+"..",i.bind(d,e))}),o(i.bind(d,d.opts.buildtools[0])),this.changeLanguage=function(e){d.downloading=!1,e.preventDefault();var i=d.language,n=d.tool.languages.filter(function(i){return i.id===e.target.value})[0];d.idx.length=0,d.components.forEach(function(e,t){i&&"io.vertx"===e.groupId&&e.artifactId==="vertx-lang-"+i.id&&(e.checked=!1),"io.vertx"===e.groupId&&e.artifactId==="vertx-lang-"+n.id&&(e.checked=!0),e.checked&&d.idx.push(t)}),d.update({presets:t(d.tool.id,e.target.value),language:n,idx:d.idx})}.bind(this),this.changePreset=function(e){d.downloading=!1,e.preventDefault();var i=d.preset,t=d.presets.filter(function(i){return i.id===e.target.value})[0];d.idx.length=0,d.components.forEach(function(e,n){i&&(-1!==i.dependencies.indexOf(e.groupId+":"+e.artifactId+(e.classifier?":"+e.classifier:""))&&(e.checked=!1),-1!==i.dependencies.indexOf(e.groupId+":"+e.artifactId)&&(e.checked=!1)),-1!==t.dependencies.indexOf(e.groupId+":"+e.artifactId+(e.classifier?":"+e.classifier:""))&&(e.checked=!0),-1!==t.dependencies.indexOf(e.groupId+":"+e.artifactId)&&(e.checked=!0),e.checked&&d.idx.push(n)}),d.update({preset:t,idx:d.idx})}.bind(this),this.toggleDependency=function(e){d.downloading=!1,d.components[e.target.value].checked=!d.components[e.target.value].checked,d.update()}.bind(this),this.generate=function(e){e.preventDefault(),window.scroll(0,n(document.getElementById("interaction")));var i=e.target.submit,t=d.refs.download;i.disabled=!0,d.generating=!0,d.downloading=!1,d.name=e.target.name.value,d.tool.fields.forEach(function(i){i.value=e.target[i.key].value}),compileProject({buildtool:d.tool,dependencies:d.components,language:d.language,preset:d.preset},function(e,n){if(e)return i.disabled=!1,d.generating=!1,d.update(),alert(e);JSZip.support.blob?n.generateAsync({type:"blob",platform:"UNIX"}).then(function(e){"#"!==t.href&&(window.webkitURL||window.URL).revokeObjectURL(t.href),t.href=(window.webkitURL||window.URL).createObjectURL(e),i.disabled=!1,d.generating=!1,d.downloading=!0,d.update();try{document.getElementById("download-btn").focus()}catch(e){}},function(e){ga("send","exception",{exDescription:e.message,exFatal:!0}),alert(e)}):n.generateAsync({type:"base64",platform:"UNIX"}).then(function(e){i.disabled=!1,d.generating=!1,d.downloading=!0,d.update(),window.location="data:application/zip;base64,"+e},function(e){ga("send","exception",{exDescription:e.message,exFatal:!0}),alert(e)})}),d.update()}.bind(this),this.clean=function(e){setTimeout(function(){d.downloading=!1,d.update()},500)}.bind(this),this.search=function(e){var i=[];d.components.forEach(function(t,n){if(t.checked)i.push(n);else{var d=e.target.value;d.length>0&&(-1!==t.artifactId.indexOf(d)||t.description&&-1!==t.description.indexOf(d))&&i.push(n)}}),d.update({idx:i})}.bind(this)}),riot.tag2("navigation",'<li each="{opts.buildtools}" class="nav-item"><a href="#{id}" onclick="{closeMenu}">&nbsp;&nbsp;{id}</a></li>',"","",function(e){this.closeMenu=function(e){document.getElementById("nav-trigger").checked=!1}.bind(this)});