riot.tag2("main",'<div if="{tool}" class="container"><h1>{tool.id}: {tool.file}</h1><form onsubmit="{generate}"><div each="{f, i in tool.fields}" class="row"><virtual if="{i % 2 === 0}"><div class="col-6"><input name="{tool.fields[i].key}" type="text" placeholder="{tool.fields[i].label + (tool.fields[i].prefill ? \' e.g.: \' + tool.fields[i].prefill : \'\')}" required="{tool.fields[i].required}"></div><div class="col-6"><input if="{tool.fields[i+1]}" name="{tool.fields[i+1].key}" type="text" placeholder="{tool.fields[i+1].label + (tool.fields[i+1].prefill ? \' e.g.: \' + tool.fields[i+1].prefill : \'\')}" required="{tool.fields[i+1].required}"></div></virtual></div><div if="{tool.languages || presets}" class="row"><div class="col-6"><select id="language" disabled="{!tool.languages || tool.languages.length == 0}" onchange="{changeLanguage}"><option each="{tool.languages}" riot-value="{id}">{id}</option></select></div><div class="col-6"><select id="preset" disabled="{!presets || presets.length == 0}" onchange="{changePreset}"><option value="">Empty Project</option><option each="{presets}" riot-value="{id}">{id}</option></select></div></div><div class="row"><div class="col-6"><h1>Dependencies</h1></div><div class="col-6"><input type="text" class="pull-right" placeholder="Search dependency..." onkeyup="{search}"></div></div><div each="{c, i in dependencies}" class="row"><virtual if="{i % 2 == 0}"><div class="col-6"><div class="{dependency: dependencies[i].checked}"><input name="dependencies" type="checkbox" riot-value="{i}" checked="{dependencies[i].checked}" onclick="{toggleDependency}"><div><span if="{dependencies[i].stack}" class="pull-right"><img src="img/stack.svg" width="16px"></span><strong>{dependencies[i].artifactId}</strong><hr><p if="{dependencies[i].description}">{dependencies[i].description}</p></div><br></div></div><div class="col-6"><div if="{dependencies[i+1]}" class="{dependency: dependencies[i+1].checked}"><input name="dependencies" type="checkbox" riot-value="{i+1}" checked="{dependencies[i+1].checked}" onclick="{toggleDependency}"><div><span if="{dependencies[i+1].stack}" class="pull-right"><img src="img/stack.svg" width="16px"></span><strong>{dependencies[i+1].artifactId}</strong><hr><p if="{dependencies[i+1].description}">{dependencies[i+1].description}</p></div><br></div></div></virtual></div><div class="row" id="interaction"><div class="col-8"><button name="submit" type="submit">Generate</button> &nbsp; <a id="download-btn" onclick="{clean}" href="#" show="{downloading}" ref="download" download="{name}.zip" style="padding: 1.1rem 3.5rem; margin: 1rem 0; background: #782b90; color: #f5f5f5; border-radius: 2px; border: none; font-size: 1.3rem; transition: all .2s ease">Download</a></div><div class="col-4"><div if="{generating}" class="spinner"><div class="rect1"></div><div class="rect2"></div><div class="rect3"></div><div class="rect4"></div><div class="rect5"></div></div></div></div></form><div class="row"><div class="center"><span>powered with <span style="color:#f00000">&lt;3</span> by <a href="https://github.com/pmlopes/vertx-starter/tree/gh-pages">github.com</a></span></div></div></div>',"","",function(e){function i(i){var t=route.query(),o={dependencies:(decodeURIComponent(t.dependencies)||"").split(",")};if(i.languages){ga("send",{hitType:"event",eventCategory:i.id+":view",eventAction:i.id+"/view",eventLabel:"project"});var a=[];e.components.forEach(function(e,n){var t;return-1!==o.dependencies.indexOf(e.groupId+":"+e.artifactId+(e.classifier?":"+e.classifier:""))?(t=clone(e),t.checked=!0,t.id=n,void a.push(t)):-1!==o.dependencies.indexOf(e.groupId+":"+e.artifactId)?(t=clone(e),t.checked=!0,t.id=n,void a.push(t)):-1!==i.defaults.indexOf(e.groupId+":"+e.artifactId+(e.classifier?":"+e.classifier:""))?(t=clone(e),t.checked=!0,t.id=n,void a.push(t)):-1!==i.defaults.indexOf(e.groupId+":"+e.artifactId)?(t=clone(e),t.checked=!0,t.id=n,void a.push(t)):void 0}),d.update({downloading:!1,tool:i,presets:n(i.id,i.languages[0].id),language:i.languages[0],dependencies:a})}else d.update({downloading:!1,tool:i,dependencies:[]})}function n(i,n){return e.presets.filter(function(e){return e.language?e.buildtool?e.buildtool===i&&e.language===n:e.language===n:!!e.buildtool&&e.buildtool===i})}function t(e){var i=0;if(e.offsetParent){do{i+=e.offsetTop}while(e=e.offsetParent);return[i]}}var d=this,o=route.create();e.buildtools.forEach(function(e){o(e.id+"..",i.bind(d,e))}),o(i.bind(d,d.opts.buildtools[0])),this.changeLanguage=function(i){i.preventDefault();var t=d.language,o=d.tool.languages.filter(function(e){return e.id===i.target.value})[0];ga("send",{hitType:"event",eventCategory:o.id+":view",eventAction:o.id+"/view",eventLabel:"project"});var a=[].concat(d.dependencies);t&&a.forEach(function(e,i){"io.vertx"===e.groupId&&e.artifactId==="vertx-lang-"+t.id&&a.splice(i,1)}),e.components.forEach(function(e,i){if("io.vertx"===e.groupId&&e.artifactId==="vertx-lang-"+o.id){var n=clone(e);n.checked=!0,n.id=i,a.push(n)}}),d.update({downloading:!1,presets:n(d.tool.id,i.target.value),language:o,dependencies:a})}.bind(this),this.changePreset=function(i){i.preventDefault();var n=d.preset,t=d.presets.filter(function(e){return e.id===i.target.value})[0];ga("send",{hitType:"event",eventCategory:t.id+":view",eventAction:t.id+"/view",eventLabel:"project"});var o=[].concat(d.dependencies);n&&o.forEach(function(e,i){-1===n.dependencies.indexOf(e.groupId+":"+e.artifactId+(e.classifier?":"+e.classifier:""))?-1===n.dependencies.indexOf(e.groupId+":"+e.artifactId)||o.splice(i,1):o.splice(i,1)}),e.components.forEach(function(e,i){var n;return-1!==t.dependencies.indexOf(e.groupId+":"+e.artifactId+(e.classifier?":"+e.classifier:""))?(n=clone(e),n.checked=!0,n.id=i,void o.push(n)):-1!==t.dependencies.indexOf(e.groupId+":"+e.artifactId)?(n=clone(e),n.checked=!0,n.id=i,void o.push(n)):void 0}),d.update({downloading:!1,preset:t,dependencies:o})}.bind(this),this.toggleDependency=function(e){d.dependencies[e.target.value].checked=!d.dependencies[e.target.value].checked,d.update({downloading:!1,dependencies:d.dependencies})}.bind(this),this.generate=function(i){i.preventDefault(),window.scroll(0,t(document.getElementById("interaction")));var n=i.target.submit,o=d.refs.download;n.disabled=!0,d.tool.fields.forEach(function(e){e.value=i.target[e.key].value}),compileProject({buildtool:d.tool,dependencies:d.dependencies,language:d.language,preset:d.preset,components:e.components},function(e,i){if(e)return n.disabled=!1,d.update({generating:!1}),alert(e);JSZip.support.blob?i.generateAsync({type:"blob",platform:"UNIX"}).then(function(e){"#"!==o.href&&(window.webkitURL||window.URL).revokeObjectURL(o.href),o.href=(window.webkitURL||window.URL).createObjectURL(e),n.disabled=!1,d.update({generating:!1,downloading:!0});try{document.getElementById("download-btn").focus()}catch(e){}},function(e){ga("send","exception",{exDescription:e.message,exFatal:!0}),alert(e)}):i.generateAsync({type:"base64",platform:"UNIX"}).then(function(e){n.disabled=!1,d.update({generating:!1,downloading:!0}),window.location="data:application/zip;base64,"+e},function(e){ga("send","exception",{exDescription:e.message,exFatal:!0}),alert(e)})}),d.update({generating:!0,downloading:!1,name:i.target.name.value})}.bind(this),this.clean=function(e){setTimeout(function(){d.downloading=!1,d.update()},500)}.bind(this),this.search=function(i){var n=[].concat(d.dependencies.filter(function(e){return e.checked})),t=i.target.value;if(t.length>0){e.components.forEach(function(e,i){if(-1!==e.artifactId.indexOf(t)||e.description&&-1!==e.description.indexOf(t)){var d=clone(e);d.checked=!1,d.id=i,n.push(d),ctx++}}),ga("send",{hitType:"event",eventCategory:"search:fail",eventAction:t+"/fail",eventLabel:"component"})}d.update({dependencies:n})}.bind(this)}),riot.tag2("navigation",'<li each="{opts.buildtools}" class="nav-item"><a href="#{id}" onclick="{closeMenu}">&nbsp;&nbsp;{id}</a></li>',"","",function(e){this.closeMenu=function(e){document.getElementById("nav-trigger").checked=!1}.bind(this)});