!function(e){function a(){}function t(e,a,t,n){var o,i,l,r=a.indexOf("."),d=a.lastIndexOf("/");e.metadata.packageName&&(e.metadata.dirName=e.metadata.packageName.replace(/\./g,"/")),e.metadata.fileName=a.substring(d+1,r),i=(i=a.replace("{package}",e.metadata.dirName||"")).substr(i.indexOf("/")+1),o=a.replace("{package}/",""),l=Handlebars.templates[o],t?n.file(e.metadata.name.replace(/[ -]/g,"_")+"/"+i,l(e),{unixPermissions:"755"}):n.file(e.metadata.name.replace(/[ -]/g,"_")+"/"+i,l(e))}e.clone=function(e){return a.prototype=e,new a},e.loadJSON=function(e,a){if(localStorage){var t=localStorage.getItem(e);if(t)if((t=JSON.parse(t)).version!==window.starterVersion)localStorage.removeItem(e);else{if(!(t.ttl&&t.ttl<Date.now()))return void a(null,t.text);localStorage.removeItem(e)}}var n=new XMLHttpRequest;n.overrideMimeType("application/json"),n.open("GET",e,!0),n.onreadystatechange=function(){if(n.readyState===XMLHttpRequest.DONE){if(200!==n.status&&304!==n.status)return a("Failed to load the metadata!");var t={version:window.starterVersion,ttl:18e5+Date.now(),text:n.responseText};localStorage&&localStorage.setItem(e,JSON.stringify(t)),a(null,t.text)}},n.send(null)},e.compileProject=function(e,a){var n,o=e.buildtool.executables||[];e.preset&&(o=o.concat(e.preset.executables||[])),ga("send",{hitType:"event",eventCategory:e.buildtool.id+":project",eventAction:e.buildtool.id+"/new",eventLabel:"project"}),e.dependenciesGAV={},e.dependencies.forEach(function(a){e.dependenciesGAV[a.groupId+":"+a.artifactId]=a.version,a.classifier&&(e.dependenciesGAV[a.groupId+":"+a.artifactId+":"+a.classifier]=a.version),ga("send",{hitType:"event",eventCategory:e.buildtool.id+":dependency",eventAction:e.buildtool.id+"/"+a.groupId+":"+a.artifactId+":"+a.version,eventLabel:"dependency"})}),e.bom=[],e.components.forEach(function(a){var t=clone(a);t.included=!1,e.bom.push(t)}),e.dependencies.forEach(function(a){e.bom[a.id].included=!0}),e.metadata={};var i=e.language.id;-1!==i.indexOf(" ")&&(i=i.substring(0,i.indexOf(" "))),e.metadata[i]=!0,e.metadata.artifactSuffix=e.buildtool["non-core-suffix"]||"",e.buildtool.fields.forEach(function(a){e.metadata[a.key]=a.value?a.value:a.prefill}),e.metadata.groupId&&(e.metadata.packageName=e.metadata.groupId+"."+(e.metadata.artifactId||e.metadata.name.replace(/[ -]/g,"_"))),e.metadata.main=e.language.main.replace("{package}",e.metadata.packageName||"");var l=new JSZip,r=[];for(r=r.concat(e.buildtool.templates),e.language.templates&&(r=r.concat(e.language.templates)),e.preset&&(r=r.concat(e.preset.templates||[]),e.preset.languages&&e.preset.languages[e.language.id]&&(r=r.concat(e.preset.languages[e.language.id].templates))),e.dependencies.forEach(function(e){r=r.concat(e.templates||[])}),n=0;n<r.length;n++)t(e,r[n],-1!==(o||[]).indexOf(r[n]),l);var d=e.buildtool.blob;e.preset&&(d=e.preset.blob||d),d?JSZipUtils.getBinaryContent(d,function(t,n){if(t)return ga("send","exception",{exDescription:t,exFatal:!0}),void a(t);l.loadAsync(n,{decodeFileName:function(a){return e.metadata.name.replace(/[ -]/g,"_")+"/"+String.fromCharCode.apply(null,a)}}).then(function(e){a(null,e)}).catch(function(e){ga("send","exception",{exDescription:e.message,exFatal:!0}),a(t)})}):a(null,l)}}(window);